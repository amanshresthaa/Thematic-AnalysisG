2024-11-21 19:40:25,940 [DEBUG] faiss.loader: Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2024-11-21 19:40:25,941 [INFO] faiss.loader: Loading faiss.
2024-11-21 19:40:26,011 [INFO] faiss.loader: Successfully loaded faiss.
2024-11-21 19:40:26,139 [WARNING] root: 	*** Since DSPy 2.5.16+, TypedPredictors are now deprecated, underperform, and are about to be removed! ***
Please use standard predictors, e.g. dspy.Predict and dspy.ChainOfThought.
They now support type annotations and other features of TypedPredictors and tend to work much better out of the box.
Please let us know if you face any issues: https://github.com/stanfordnlp/dspy/issues
2024-11-21 19:40:26,139 [INFO] src.analysis.metrics: Comprehensive Assessment DSPy module initialized successfully.
2024-11-21 19:40:26,142 [INFO] src.processing.answer_generator: Unoptimized DSPy module initialized successfully.
2024-11-21 19:40:28,267 [DEBUG] __main__: Entering main function.
2024-11-21 19:40:28,267 [INFO] __main__: Configuring DSPy Language Model
2024-11-21 19:40:28,267 [INFO] __main__: Loading training data from 'data/new_training_data.csv'
2024-11-21 19:40:28,918 [INFO] __main__: Loading codebase chunks from 'data/codebase_chunks.json'
2024-11-21 19:40:28,919 [INFO] __main__: Initializing ContextualVectorDB
2024-11-21 19:40:28,929 [INFO] __main__: Loading data into ContextualVectorDB
2024-11-21 19:40:31,582 [INFO] __main__: Creating Elasticsearch BM25 index
2024-11-21 19:40:31,582 [DEBUG] __main__: Entering create_elasticsearch_bm25_index method.
2024-11-21 19:40:31,688 [INFO] __main__: ElasticsearchBM25 instance created.
2024-11-21 19:40:31,721 [INFO] __main__: Elasticsearch BM25 index created successfully with 90 documents indexed.
2024-11-21 19:40:31,721 [INFO] __main__: Loading standard queries from 'data/queries.json'
2024-11-21 19:40:31,722 [INFO] __main__: Loading alternative queries from 'data/queries_alt.json'
2024-11-21 19:40:31,722 [INFO] __main__: Loading keyword queries from 'data/queries_alt.json'
2024-11-21 19:40:31,723 [INFO] __main__: Validating standard queries
2024-11-21 19:40:31,723 [INFO] __main__: Validating alternative queries
2024-11-21 19:40:31,723 [INFO] __main__: Validating keyword queries
2024-11-21 19:40:31,723 [INFO] __main__: Attempting to load optimized DSPy program
2024-11-21 19:40:31,723 [WARNING] __main__: Failed to load optimized program. Using unoptimized module.
2024-11-21 19:40:31,724 [INFO] __main__: Unoptimized DSPy module initialized successfully.
2024-11-21 19:40:31,724 [INFO] __main__: Initializing DSPy Optimizer with Comprehensive Metric
2024-11-21 19:40:31,725 [INFO] __main__: DSPy Optimizer initialized successfully with Comprehensive Metric.
2024-11-21 19:40:31,725 [INFO] __main__: Compiling the program using the optimizer
2024-11-21 19:40:31,726 [ERROR] __main__: Error during program compilation: 
Traceback (most recent call last):
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/src/main.py", line 185, in run_pipeline
    self.optimized_program = self.teleprompter.compile(
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/teleprompt/random_search.py", line 119, in compile
    score, subscores = evaluate(program, return_all_scores=True)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/evaluate/evaluate.py", line 115, in __call__
    results = executor.execute(process_item, devset)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 42, in execute
    return self._execute_multi_thread(wrapped_function, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 164, in _execute_multi_thread
    index, result = future.result()
                    ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.7_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.7_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/opt/homebrew/Cellar/python@3.12/3.12.7_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 150, in cancellable_function
    return index, function(item, parent_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 52, in wrapped
    assert creating_new_thread or threading.get_ident() == dspy.settings.main_tid
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2024-11-21 19:42:44,213 [DEBUG] faiss.loader: Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2024-11-21 19:42:44,213 [INFO] faiss.loader: Loading faiss.
2024-11-21 19:42:44,311 [INFO] faiss.loader: Successfully loaded faiss.
2024-11-21 19:42:44,453 [WARNING] root: 	*** Since DSPy 2.5.16+, TypedPredictors are now deprecated, underperform, and are about to be removed! ***
Please use standard predictors, e.g. dspy.Predict and dspy.ChainOfThought.
They now support type annotations and other features of TypedPredictors and tend to work much better out of the box.
Please let us know if you face any issues: https://github.com/stanfordnlp/dspy/issues
2024-11-21 19:42:44,454 [INFO] src.analysis.metrics: Comprehensive Assessment DSPy module initialized successfully.
2024-11-21 19:42:44,457 [INFO] src.processing.answer_generator: Unoptimized DSPy module initialized successfully.
2024-11-21 19:42:46,566 [INFO] __main__: Configuring DSPy Language Model
2024-11-21 19:42:46,566 [INFO] __main__: DSPy Language Model configured successfully.
2024-11-21 19:42:46,566 [INFO] __main__: Loading training data from 'data/new_training_data.csv'
2024-11-21 19:42:47,184 [INFO] __main__: Training data loaded successfully.
2024-11-21 19:42:47,184 [INFO] __main__: Compiling the program using the optimizer
2024-11-21 19:42:47,184 [ERROR] __main__: Error during program compilation: 'NoneType' object has no attribute 'compile'
Traceback (most recent call last):
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/src/main.py", line 302, in compile_program
    self.optimized_program = self.teleprompter.compile(
                             ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'compile'
2024-11-21 19:42:47,185 [ERROR] __main__: Compilation failed. Exiting the pipeline.
Traceback (most recent call last):
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/src/main.py", line 349, in <module>
    pipeline.compile_program(train_dataset)
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/src/main.py", line 302, in compile_program
    self.optimized_program = self.teleprompter.compile(
                             ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'compile'
2024-11-21 19:43:49,853 [DEBUG] faiss.loader: Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2024-11-21 19:43:49,853 [INFO] faiss.loader: Loading faiss.
2024-11-21 19:43:49,920 [INFO] faiss.loader: Successfully loaded faiss.
2024-11-21 19:43:49,984 [WARNING] root: 	*** Since DSPy 2.5.16+, TypedPredictors are now deprecated, underperform, and are about to be removed! ***
Please use standard predictors, e.g. dspy.Predict and dspy.ChainOfThought.
They now support type annotations and other features of TypedPredictors and tend to work much better out of the box.
Please let us know if you face any issues: https://github.com/stanfordnlp/dspy/issues
2024-11-21 19:43:49,984 [INFO] src.analysis.metrics: Comprehensive Assessment DSPy module initialized successfully.
2024-11-21 19:43:49,986 [INFO] src.processing.answer_generator: Unoptimized DSPy module initialized successfully.
2024-11-21 19:43:52,041 [DEBUG] __main__: Entering main function.
2024-11-21 19:43:52,041 [INFO] __main__: Configuring DSPy Language Model
2024-11-21 19:43:52,041 [INFO] __main__: Loading training data from 'data/new_training_data.csv'
2024-11-21 19:43:52,688 [INFO] __main__: Loading codebase chunks from 'data/codebase_chunks.json'
2024-11-21 19:43:52,689 [INFO] __main__: Initializing ContextualVectorDB
2024-11-21 19:43:52,697 [INFO] __main__: Loading data into ContextualVectorDB
2024-11-21 19:43:54,869 [INFO] __main__: Creating Elasticsearch BM25 index
2024-11-21 19:43:54,869 [DEBUG] __main__: Entering create_elasticsearch_bm25_index method.
2024-11-21 19:43:54,949 [INFO] __main__: ElasticsearchBM25 instance created.
2024-11-21 19:43:54,972 [INFO] __main__: Elasticsearch BM25 index created successfully with 90 documents indexed.
2024-11-21 19:43:54,972 [INFO] __main__: Loading standard queries from 'data/queries.json'
2024-11-21 19:43:54,972 [INFO] __main__: Loading alternative queries from 'data/queries_alt.json'
2024-11-21 19:43:54,972 [INFO] __main__: Loading keyword queries from 'data/queries_alt.json'
2024-11-21 19:43:54,973 [INFO] __main__: Validating standard queries
2024-11-21 19:43:54,973 [INFO] __main__: Validating alternative queries
2024-11-21 19:43:54,973 [INFO] __main__: Validating keyword queries
2024-11-21 19:43:54,973 [INFO] __main__: Attempting to load optimized DSPy program
2024-11-21 19:43:54,973 [WARNING] __main__: Failed to load optimized program. Using unoptimized module.
2024-11-21 19:43:54,973 [INFO] __main__: Unoptimized DSPy module initialized successfully.
2024-11-21 19:43:54,973 [INFO] __main__: Initializing DSPy Optimizer with Comprehensive Metric
2024-11-21 19:43:54,973 [INFO] __main__: DSPy Optimizer initialized successfully with Comprehensive Metric.
2024-11-21 19:43:54,973 [INFO] __main__: Compiling the program using the optimizer
2024-11-21 19:43:54,974 [ERROR] __main__: Error during program compilation: 
Traceback (most recent call last):
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/src/main.py", line 185, in run_pipeline
    self.optimized_program = self.teleprompter.compile(
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/teleprompt/random_search.py", line 119, in compile
    score, subscores = evaluate(program, return_all_scores=True)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/evaluate/evaluate.py", line 115, in __call__
    results = executor.execute(process_item, devset)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 42, in execute
    return self._execute_multi_thread(wrapped_function, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 164, in _execute_multi_thread
    index, result = future.result()
                    ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.7_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.7_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/opt/homebrew/Cellar/python@3.12/3.12.7_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 150, in cancellable_function
    return index, function(item, parent_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 52, in wrapped
    assert creating_new_thread or threading.get_ident() == dspy.settings.main_tid
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2024-11-21 19:52:50,904 [DEBUG] faiss.loader: Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2024-11-21 19:52:50,905 [INFO] faiss.loader: Loading faiss.
2024-11-21 19:52:50,976 [INFO] faiss.loader: Successfully loaded faiss.
2024-11-21 19:52:51,121 [WARNING] root: 	*** Since DSPy 2.5.16+, TypedPredictors are now deprecated, underperform, and are about to be removed! ***
Please use standard predictors, e.g. dspy.Predict and dspy.ChainOfThought.
They now support type annotations and other features of TypedPredictors and tend to work much better out of the box.
Please let us know if you face any issues: https://github.com/stanfordnlp/dspy/issues
2024-11-21 19:52:51,121 [INFO] src.analysis.metrics: Comprehensive Assessment DSPy module initialized successfully.
2024-11-21 19:52:51,124 [INFO] src.processing.answer_generator: Unoptimized DSPy module initialized successfully.
2024-11-21 19:52:53,257 [DEBUG] __main__: Entering main function.
2024-11-21 19:52:53,257 [INFO] __main__: Configuring DSPy Language Model
2024-11-21 19:52:53,257 [INFO] __main__: Loading training data from 'data/new_training_data.csv'
2024-11-21 19:52:53,912 [INFO] __main__: Loading codebase chunks from 'data/codebase_chunks.json'
2024-11-21 19:52:53,913 [INFO] __main__: Initializing ContextualVectorDB
2024-11-21 19:52:53,922 [INFO] __main__: Loading data into ContextualVectorDB
2024-11-21 19:52:56,530 [INFO] __main__: Creating Elasticsearch BM25 index
2024-11-21 19:52:56,531 [DEBUG] __main__: Entering create_elasticsearch_bm25_index method.
2024-11-21 19:52:56,607 [INFO] __main__: ElasticsearchBM25 instance created.
2024-11-21 19:52:56,632 [INFO] __main__: Elasticsearch BM25 index created successfully with 90 documents indexed.
2024-11-21 19:52:56,633 [INFO] __main__: Loading standard queries from 'data/queries.json'
2024-11-21 19:52:56,633 [INFO] __main__: Loading alternative queries from 'data/queries_alt.json'
2024-11-21 19:52:56,633 [INFO] __main__: Loading keyword queries from 'data/queries_keyword.json'
2024-11-21 19:52:56,634 [INFO] __main__: Validating standard queries
2024-11-21 19:52:56,634 [INFO] __main__: Validating alternative queries
2024-11-21 19:52:56,634 [INFO] __main__: Validating keyword queries
2024-11-21 19:52:56,634 [DEBUG] __main__: Entering synchronous pipeline setup.
2024-11-21 19:52:56,634 [INFO] __main__: Initializing QA module with standard predictors
2024-11-21 19:52:56,634 [ERROR] __main__: Unexpected error in synchronous pipeline setup: type object 'Predict' has no attribute 'output_fields'
Traceback (most recent call last):
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/src/main.py", line 68, in run_pipeline_sync
    self.qa_module = ChainOfThought(Predict, QuestionAnswerSignature)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/predict/chain_of_thought.py", line 18, in __init__
    *_keys, last_key = signature.output_fields.keys()
                       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'Predict' has no attribute 'output_fields'
2024-11-21 19:52:56,636 [ERROR] __main__: Unexpected error in main function: type object 'Predict' has no attribute 'output_fields'
Traceback (most recent call last):
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/src/main.py", line 239, in run_pipeline
    self.run_pipeline_sync(train_dataset)
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/src/main.py", line 68, in run_pipeline_sync
    self.qa_module = ChainOfThought(Predict, QuestionAnswerSignature)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/predict/chain_of_thought.py", line 18, in __init__
    *_keys, last_key = signature.output_fields.keys()
                       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'Predict' has no attribute 'output_fields'
2024-11-21 19:53:19,798 [DEBUG] faiss.loader: Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2024-11-21 19:53:19,798 [INFO] faiss.loader: Loading faiss.
2024-11-21 19:53:19,890 [INFO] faiss.loader: Successfully loaded faiss.
2024-11-21 19:53:19,977 [WARNING] root: 	*** Since DSPy 2.5.16+, TypedPredictors are now deprecated, underperform, and are about to be removed! ***
Please use standard predictors, e.g. dspy.Predict and dspy.ChainOfThought.
They now support type annotations and other features of TypedPredictors and tend to work much better out of the box.
Please let us know if you face any issues: https://github.com/stanfordnlp/dspy/issues
2024-11-21 19:53:19,978 [INFO] src.analysis.metrics: Comprehensive Assessment DSPy module initialized successfully.
2024-11-21 19:53:19,980 [INFO] src.processing.answer_generator: Unoptimized DSPy module initialized successfully.
2024-11-21 19:53:22,104 [DEBUG] __main__: Entering main function.
2024-11-21 19:53:22,105 [INFO] __main__: Configuring DSPy Language Model
2024-11-21 19:53:22,105 [INFO] __main__: Loading training data from 'data/new_training_data.csv'
2024-11-21 19:53:22,703 [INFO] __main__: Loading codebase chunks from 'data/codebase_chunks.json'
2024-11-21 19:53:22,705 [INFO] __main__: Initializing ContextualVectorDB
2024-11-21 19:53:22,740 [INFO] __main__: Loading data into ContextualVectorDB
2024-11-21 19:53:22,741 [INFO] __main__: Creating Elasticsearch BM25 index
2024-11-21 19:53:22,741 [DEBUG] __main__: Entering create_elasticsearch_bm25_index method.
2024-11-21 19:53:22,817 [INFO] __main__: ElasticsearchBM25 instance created.
2024-11-21 19:53:22,847 [INFO] __main__: Elasticsearch BM25 index created successfully with 90 documents indexed.
2024-11-21 19:53:22,847 [INFO] __main__: Loading standard queries from 'data/queries.json'
2024-11-21 19:53:22,848 [INFO] __main__: Loading alternative queries from 'data/queries_alt.json'
2024-11-21 19:53:22,849 [INFO] __main__: Loading keyword queries from 'data/queries_alt.json'
2024-11-21 19:53:22,849 [INFO] __main__: Validating standard queries
2024-11-21 19:53:22,849 [INFO] __main__: Validating alternative queries
2024-11-21 19:53:22,849 [INFO] __main__: Validating keyword queries
2024-11-21 19:53:22,849 [INFO] __main__: Attempting to load optimized DSPy program
2024-11-21 19:53:22,849 [WARNING] __main__: Failed to load optimized program. Using unoptimized module.
2024-11-21 19:53:22,850 [INFO] __main__: Unoptimized DSPy module initialized successfully.
2024-11-21 19:53:22,850 [INFO] __main__: Initializing DSPy Optimizer with Comprehensive Metric
2024-11-21 19:53:22,850 [INFO] __main__: DSPy Optimizer initialized successfully with Comprehensive Metric.
2024-11-21 19:53:22,850 [INFO] __main__: Compiling the program using the optimizer
2024-11-21 19:53:23,815 [INFO] __main__: Program compiled and optimized successfully.
2024-11-21 19:53:23,816 [INFO] __main__: Optimized program saved to 'optimized_program.json'
2024-11-21 19:53:23,816 [INFO] __main__: Activating assertions in the optimized program.
2024-11-21 19:53:23,817 [INFO] __main__: Assertions activated in the optimized program.
2024-11-21 19:53:23,817 [INFO] __main__: Initializing SelectQuotationModule with activated assertions
2024-11-21 19:53:23,820 [INFO] __main__: SelectQuotationModule initialized successfully with assertions activated.
2024-11-21 19:53:23,820 [INFO] __main__: Initializing SelectQuotationModuleAlt with activated assertions
2024-11-21 19:53:23,823 [INFO] __main__: SelectQuotationModuleAlt initialized successfully with assertions activated.
2024-11-21 19:53:23,823 [INFO] __main__: Initializing SelectKeywordModule
2024-11-21 19:53:23,823 [INFO] __main__: SelectKeywordModule initialized successfully.
2024-11-21 19:53:23,823 [INFO] __main__: Processing standard queries with SelectQuotationModule
2024-11-21 19:53:24,164 [INFO] __main__: Processing alternative queries with SelectQuotationModuleAlt
2024-11-21 19:53:24,391 [INFO] __main__: Processing keyword queries with SelectKeywordModule
2024-11-21 19:53:24,528 [INFO] __main__: Starting evaluation of the retrieval pipeline
2024-11-21 19:53:24,528 [INFO] __main__: Evaluation completed successfully.
2024-11-21 19:53:24,528 [INFO] __main__: All operations completed successfully.
2024-11-21 20:00:56,443 [DEBUG] faiss.loader: Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2024-11-21 20:00:56,443 [INFO] faiss.loader: Loading faiss.
2024-11-21 20:00:56,525 [INFO] faiss.loader: Successfully loaded faiss.
2024-11-21 20:00:56,658 [WARNING] root: 	*** Since DSPy 2.5.16+, TypedPredictors are now deprecated, underperform, and are about to be removed! ***
Please use standard predictors, e.g. dspy.Predict and dspy.ChainOfThought.
They now support type annotations and other features of TypedPredictors and tend to work much better out of the box.
Please let us know if you face any issues: https://github.com/stanfordnlp/dspy/issues
2024-11-21 20:00:56,658 [INFO] src.analysis.metrics: Comprehensive Assessment DSPy module initialized successfully.
2024-11-21 20:00:56,661 [INFO] src.processing.answer_generator: Unoptimized DSPy module initialized successfully.
2024-11-21 20:00:58,681 [DEBUG] __main__: Entering main function.
2024-11-21 20:00:58,681 [INFO] __main__: Configuring DSPy Language Model
2024-11-21 20:00:58,681 [INFO] __main__: Loading training data from 'data/new_training_data.csv'
2024-11-21 20:00:59,320 [INFO] __main__: Loading codebase chunks from 'data/codebase_chunks.json'
2024-11-21 20:00:59,321 [INFO] __main__: Initializing ContextualVectorDB
2024-11-21 20:00:59,330 [INFO] __main__: Loading data into ContextualVectorDB
2024-11-21 20:01:01,777 [ERROR] __main__: Error loading data into ContextualVectorDB: object NoneType can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/src/main.py", line 102, in run_pipeline
    await self.contextual_db.load_data(codebase_chunks, parallel_threads=5)
TypeError: object NoneType can't be used in 'await' expression
2024-11-21 20:05:04,923 [DEBUG] faiss.loader: Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2024-11-21 20:05:04,924 [INFO] faiss.loader: Loading faiss.
2024-11-21 20:05:05,002 [INFO] faiss.loader: Successfully loaded faiss.
2024-11-21 20:05:05,087 [WARNING] root: 	*** Since DSPy 2.5.16+, TypedPredictors are now deprecated, underperform, and are about to be removed! ***
Please use standard predictors, e.g. dspy.Predict and dspy.ChainOfThought.
They now support type annotations and other features of TypedPredictors and tend to work much better out of the box.
Please let us know if you face any issues: https://github.com/stanfordnlp/dspy/issues
2024-11-21 20:05:05,087 [INFO] src.analysis.metrics: Comprehensive Assessment DSPy module initialized successfully.
2024-11-21 20:05:05,089 [INFO] src.processing.answer_generator: Unoptimized DSPy module initialized successfully.
2024-11-21 20:05:07,135 [DEBUG] __main__: Entering main function.
2024-11-21 20:05:07,135 [INFO] __main__: Configuring DSPy Language Model
2024-11-21 20:05:07,135 [INFO] __main__: Loading training data from 'data/new_training_data.csv'
2024-11-21 20:05:07,812 [INFO] __main__: Loading codebase chunks from 'data/codebase_chunks.json'
2024-11-21 20:05:07,813 [INFO] __main__: Initializing ContextualVectorDB
2024-11-21 20:05:07,821 [INFO] __main__: Loading data into ContextualVectorDB
2024-11-21 20:05:07,823 [ERROR] __main__: Error loading data into ContextualVectorDB: object NoneType can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/src/main.py", line 102, in run_pipeline
    await self.contextual_db.load_data(codebase_chunks, parallel_threads=5)
TypeError: object NoneType can't be used in 'await' expression
2024-11-21 20:05:17,490 [DEBUG] faiss.loader: Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2024-11-21 20:05:17,490 [INFO] faiss.loader: Loading faiss.
2024-11-21 20:05:17,544 [INFO] faiss.loader: Successfully loaded faiss.
2024-11-21 20:05:17,604 [WARNING] root: 	*** Since DSPy 2.5.16+, TypedPredictors are now deprecated, underperform, and are about to be removed! ***
Please use standard predictors, e.g. dspy.Predict and dspy.ChainOfThought.
They now support type annotations and other features of TypedPredictors and tend to work much better out of the box.
Please let us know if you face any issues: https://github.com/stanfordnlp/dspy/issues
2024-11-21 20:05:17,605 [INFO] src.analysis.metrics: Comprehensive Assessment DSPy module initialized successfully.
2024-11-21 20:05:17,606 [INFO] src.processing.answer_generator: Unoptimized DSPy module initialized successfully.
2024-11-21 20:05:19,487 [DEBUG] __main__: Entering main function.
2024-11-21 20:05:19,487 [INFO] __main__: Configuring DSPy Language Model
2024-11-21 20:05:19,487 [INFO] __main__: Loading training data from 'data/new_training_data.csv'
2024-11-21 20:05:19,973 [INFO] __main__: Loading codebase chunks from 'data/codebase_chunks.json'
2024-11-21 20:05:19,973 [INFO] __main__: Initializing ContextualVectorDB
2024-11-21 20:05:19,983 [INFO] __main__: Loading data into ContextualVectorDB
2024-11-21 20:05:19,985 [INFO] __main__: Creating Elasticsearch BM25 index
2024-11-21 20:05:19,985 [DEBUG] __main__: Entering create_elasticsearch_bm25_index method.
2024-11-21 20:05:20,079 [INFO] __main__: ElasticsearchBM25 instance created.
2024-11-21 20:05:20,103 [INFO] __main__: Elasticsearch BM25 index created successfully with 90 documents indexed.
2024-11-21 20:05:20,103 [INFO] __main__: Loading standard queries from 'data/queries.json'
2024-11-21 20:05:20,104 [INFO] __main__: Loading alternative queries from 'data/queries_alt.json'
2024-11-21 20:05:20,104 [INFO] __main__: Loading keyword queries from 'data/queries_alt.json'
2024-11-21 20:05:20,104 [INFO] __main__: Validating standard queries
2024-11-21 20:05:20,104 [INFO] __main__: Validating alternative queries
2024-11-21 20:05:20,104 [INFO] __main__: Validating keyword queries
2024-11-21 20:05:20,104 [INFO] __main__: Attempting to load optimized DSPy program
2024-11-21 20:05:20,104 [WARNING] __main__: Failed to load optimized program. Using unoptimized module.
2024-11-21 20:05:20,105 [INFO] __main__: Unoptimized DSPy module initialized successfully.
2024-11-21 20:05:20,105 [INFO] __main__: Initializing DSPy Optimizer with Comprehensive Metric
2024-11-21 20:05:20,105 [INFO] __main__: DSPy Optimizer initialized successfully with Comprehensive Metric.
2024-11-21 20:05:20,105 [INFO] __main__: Compiling the program using the optimizer
2024-11-21 20:05:21,037 [INFO] __main__: Program compiled and optimized successfully.
2024-11-21 20:05:21,038 [INFO] __main__: Optimized program saved to 'optimized_program.json'
2024-11-21 20:05:21,038 [INFO] __main__: Activating assertions in the optimized program.
2024-11-21 20:05:21,039 [INFO] __main__: Assertions activated in the optimized program.
2024-11-21 20:05:21,039 [INFO] __main__: Initializing SelectQuotationModule with activated assertions
2024-11-21 20:05:21,043 [INFO] __main__: SelectQuotationModule initialized successfully with assertions activated.
2024-11-21 20:05:21,043 [INFO] __main__: Initializing SelectQuotationModuleAlt with activated assertions
2024-11-21 20:05:21,045 [INFO] __main__: SelectQuotationModuleAlt initialized successfully with assertions activated.
2024-11-21 20:05:21,045 [INFO] __main__: Initializing SelectKeywordModule
2024-11-21 20:05:21,045 [INFO] __main__: SelectKeywordModule initialized successfully.
2024-11-21 20:05:21,045 [INFO] __main__: Processing standard queries with SelectQuotationModule
2024-11-21 20:05:21,367 [INFO] __main__: Processing alternative queries with SelectQuotationModuleAlt
2024-11-21 20:05:21,596 [INFO] __main__: Processing keyword queries with SelectKeywordModule
2024-11-21 20:05:21,712 [INFO] __main__: Starting evaluation of the retrieval pipeline
2024-11-21 20:05:21,713 [INFO] __main__: Evaluation completed successfully.
2024-11-21 20:05:21,713 [INFO] __main__: All operations completed successfully.
2024-11-21 20:05:33,589 [DEBUG] faiss.loader: Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU
2024-11-21 20:05:33,589 [INFO] faiss.loader: Loading faiss.
2024-11-21 20:05:33,639 [INFO] faiss.loader: Successfully loaded faiss.
2024-11-21 20:05:33,709 [WARNING] root: 	*** Since DSPy 2.5.16+, TypedPredictors are now deprecated, underperform, and are about to be removed! ***
Please use standard predictors, e.g. dspy.Predict and dspy.ChainOfThought.
They now support type annotations and other features of TypedPredictors and tend to work much better out of the box.
Please let us know if you face any issues: https://github.com/stanfordnlp/dspy/issues
2024-11-21 20:05:33,709 [INFO] src.analysis.metrics: Comprehensive Assessment DSPy module initialized successfully.
2024-11-21 20:05:33,711 [INFO] src.processing.answer_generator: Unoptimized DSPy module initialized successfully.
2024-11-21 20:05:35,548 [DEBUG] __main__: Entering main function.
2024-11-21 20:05:35,548 [INFO] __main__: Configuring DSPy Language Model
2024-11-21 20:05:35,548 [INFO] __main__: Loading training data from 'data/new_training_data.csv'
2024-11-21 20:05:36,165 [INFO] __main__: Loading codebase chunks from 'data/codebase_chunks.json'
2024-11-21 20:05:36,166 [INFO] __main__: Initializing ContextualVectorDB
2024-11-21 20:05:36,175 [INFO] __main__: Loading data into ContextualVectorDB
2024-11-21 20:05:38,903 [INFO] __main__: Creating Elasticsearch BM25 index
2024-11-21 20:05:38,903 [DEBUG] __main__: Entering create_elasticsearch_bm25_index method.
2024-11-21 20:05:38,963 [INFO] __main__: ElasticsearchBM25 instance created.
2024-11-21 20:05:38,987 [INFO] __main__: Elasticsearch BM25 index created successfully with 90 documents indexed.
2024-11-21 20:05:38,987 [INFO] __main__: Loading standard queries from 'data/queries.json'
2024-11-21 20:05:38,988 [INFO] __main__: Loading alternative queries from 'data/queries_alt.json'
2024-11-21 20:05:38,988 [INFO] __main__: Loading keyword queries from 'data/queries_alt.json'
2024-11-21 20:05:38,988 [INFO] __main__: Validating standard queries
2024-11-21 20:05:38,989 [INFO] __main__: Validating alternative queries
2024-11-21 20:05:38,989 [INFO] __main__: Validating keyword queries
2024-11-21 20:05:38,989 [INFO] __main__: Attempting to load optimized DSPy program
2024-11-21 20:05:38,989 [WARNING] __main__: Failed to load optimized program. Using unoptimized module.
2024-11-21 20:05:38,990 [INFO] __main__: Unoptimized DSPy module initialized successfully.
2024-11-21 20:05:38,990 [INFO] __main__: Initializing DSPy Optimizer with Comprehensive Metric
2024-11-21 20:05:38,990 [INFO] __main__: DSPy Optimizer initialized successfully with Comprehensive Metric.
2024-11-21 20:05:38,990 [INFO] __main__: Compiling the program using the optimizer
2024-11-21 20:05:39,965 [ERROR] __main__: Error during program compilation: 
Traceback (most recent call last):
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/src/main.py", line 185, in run_pipeline
    self.optimized_program = self.teleprompter.compile(
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/teleprompt/random_search.py", line 119, in compile
    score, subscores = evaluate(program, return_all_scores=True)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/evaluate/evaluate.py", line 115, in __call__
    results = executor.execute(process_item, devset)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 42, in execute
    return self._execute_multi_thread(wrapped_function, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 164, in _execute_multi_thread
    index, result = future.result()
                    ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.7_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.7_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/opt/homebrew/Cellar/python@3.12/3.12.7_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 150, in cancellable_function
    return index, function(item, parent_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amankumarshrestha/Documents/GitHub/Thematic-AnalysisG/.venv/lib/python3.12/site-packages/dspy/utils/parallelizer.py", line 52, in wrapped
    assert creating_new_thread or threading.get_ident() == dspy.settings.main_tid
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
